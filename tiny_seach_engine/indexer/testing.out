bash -v testing.sh
module () {  _module_raw "$@" 2>&1
}
ml () {  module ml "$@"
}
_module_raw () {  eval `/usr/bin/tclsh8.6 /usr/lib/x86_64-linux-gnu/modulecmd.tcl bash "$@"`;
 _mlstatus=$?;
 return $_mlstatus
}
#!/bin/bash

# Zion Slaughter
# Lab 5 CS50
# testing.sh
#
# runs through major error cases in first phase,
# creates multiple files using the indexer and
# copies of files from the indextest module from
# crawler data

##****************** PHASE ONE ******************##

# indexer with no valid arguments
./indexer rotten apple
Error: Incompatible prefix, must be of type '../data' not 'rotten'

# indexer with no arguments
./indexer
Parsing Error 	args required: pageDirectory indexFilename

# indexer with one argument
./indexer ../data/letters-2
Parsing Error 	args required: pageDirectory indexFilename

# indexer with three arguments
./indexer ../data/letters-0 ../data/letters-1 ../data/letters-2
Parsing Error 	args required: pageDirectory indexFilename

# indexer with invalid pageDirectory
./indexer ../data/notthere ../data/letters-2/indexItem.ndx
Error: Invalid Directory ../data/notthere please try again

# indexer with NOT crawler directory
./indexer ../data/notCrawler ../data/letters-2/indexItem.ndx
Error, Canonical crawler file indicator .crawler not found

# indexer with invalid index item  (fake path)
./indexer ../data/letters-2 ../data/letters-infinite/indexItem.ndx
Parsing Error 	Cannot create file at ../data/letters-infinite/indexItem.ndx





##****************** PHASE TWO ******************/

# indexer with letters-2 and VALGRIND

valgrind --leak-check=full ./indexer ../data/letters-2 ../data/letters-2/indexItem.ndx
==3133421== Memcheck, a memory error detector
==3133421== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==3133421== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==3133421== Command: ./indexer ../data/letters-2 ../data/letters-2/indexItem.ndx
==3133421== 
==3133421== Conditional jump or move depends on uninitialised value(s)
==3133421==    at 0x10B05B: pagedir_val (pagedir.c:123)
==3133421==    by 0x10A893: indexBuild (indexer.c:92)
==3133421==    by 0x10A7F6: main (indexer.c:63)
==3133421== 
==3133421== 
==3133421== HEAP SUMMARY:
==3133421==     in use at exit: 944 bytes in 2 blocks
==3133421==   total heap usage: 627 allocs, 625 frees, 2,201,260 bytes allocated
==3133421== 
==3133421== LEAK SUMMARY:
==3133421==    definitely lost: 0 bytes in 0 blocks
==3133421==    indirectly lost: 0 bytes in 0 blocks
==3133421==      possibly lost: 0 bytes in 0 blocks
==3133421==    still reachable: 944 bytes in 2 blocks
==3133421==         suppressed: 0 bytes in 0 blocks
==3133421== Reachable blocks (those to which a pointer was found) are not shown.
==3133421== To see them, rerun with: --leak-check=full --show-leak-kinds=all
==3133421== 
==3133421== Use --track-origins=yes to see where uninitialised values come from
==3133421== For lists of detected and suppressed errors, rerun with: -s
==3133421== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)

# indextest with letters-2 product and VALGRIND

valgrind --leak-check=full ./indextest ../data/letters-2/indexItem.ndx ../data/letters-2/indexRepro.ndx
==3133468== Memcheck, a memory error detector
==3133468== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==3133468== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==3133468== Command: ./indextest ../data/letters-2/indexItem.ndx ../data/letters-2/indexRepro.ndx
==3133468== 
==3133468== 
==3133468== HEAP SUMMARY:
==3133468==     in use at exit: 0 bytes in 0 blocks
==3133468==   total heap usage: 239 allocs, 239 frees, 21,455 bytes allocated
==3133468== 
==3133468== All heap blocks were freed -- no leaks are possible
==3133468== 
==3133468== For lists of detected and suppressed errors, rerun with: -s
==3133468== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)

# comparing outputs

~/cs50-dev/shared/tse/indexcmp ../data/letters-2/indexItem.ndx ../data/letters-2/indexRepro.ndx




# indexer with letters-3

./indexer ../data/letters-3 ../data/letters-3/indexItem.ndx

#indextest with letters-3 product

./indextest ../data/letters-3/indexItem.ndx ../data/letters-3/indexRepro.ndx


# comparing outputs

~/cs50-dev/shared/tse/indexcmp ../data/letters-3/indexItem.ndx ../data/letters-3/indexRepro.ndx





# indexer with toscrape-3

./indexer ../data/toscrape-3 ../data/toscrape-3/indexItem.ndx

# indextest with toscrape-3 product

./indextest ../data/toscrape-3/indexItem.ndx ../data/toscrape-3/indexRepro.ndx

# comparing outputs

~/cs50-dev/shared/tse/indexcmp ../data/toscrape-3/indexItem.ndx ../data/toscrape-3/indexRepro.ndx





# indexer with wikipedia-2

./indexer ../data/wikipedia-2 ../data/wikipedia-2/indexItem.ndx

# indextest with wikipedia-2 product

./indextest ../data/wikipedia-2/indexItem.ndx ../data/wikipedia-2/indexRepro.ndx

# comparing outputs

~/cs50-dev/shared/tse/indexcmp ../data/wikipedia-2/indexItem.ndx ../data/wikipedia-2/indexRepro.ndx
